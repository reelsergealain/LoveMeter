<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur d'Amour Premium - REEL SERGE ALAIN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Love Calculator">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ2FsY3VsYXRldXIgZCdBbW91ciBQcmVtaXVtIiwic2hvcnRfbmFtZSI6IkxvdmUgQ2FsYyIsImRlc2NyaXB0aW9uIjoiRMOpY291dnJleiBub3RyZSBjb21wYXRpYmlsaXTDqSBhbW91cmV1c2UiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzY2N2VlYSIsInRoZW1lX2NvbG9yIjoiIzY2N2VlYSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNakEwSWlCb1pXbG5hSFE5SWpJd05DSWdkbWxsZDBKdmVEMGlNQ0F3SURJME5DQXlORFFpSUdobGJXNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEhCaGRHZ2daRDBpVFRFeU1DQXpNRUV6TURZMU1EWXhMakkxTlRCRU1Ua3lOemtnTVRNeE16UkJOVGcwTGpRMU16RXhOalExTlRVMk1qVTVObHAgTkRFdU5qZ3pOall6SWwwPSIsInNpemVzIjoiMTkyeDE5MiIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        .font-dancing { font-family: 'Dancing Script', cursive; }
        .font-poppins { font-family: 'Poppins', sans-serif; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        
        .heart-float { animation: float 4s ease-in-out infinite; }
        .heart-float:nth-child(2) { animation-delay: 0.5s; }
        .heart-float:nth-child(3) { animation-delay: 1s; }
        .heart-float:nth-child(4) { animation-delay: 1.5s; }
        .heart-float:nth-child(5) { animation-delay: 2s; }
        .heart-float:nth-child(6) { animation-delay: 2.5s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
            25% { transform: translateY(-15px) rotate(2deg); opacity: 1; }
            50% { transform: translateY(-30px) rotate(-2deg); opacity: 0.8; }
            75% { transform: translateY(-15px) rotate(1deg); opacity: 1; }
        }
        
        .premium-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: premium-gradient 15s ease infinite;
        }
        
        @keyframes premium-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .glass-premium {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
        }
        
        .loading-heart { animation: loading-pulse 1s ease-in-out infinite alternate; }
        
        @keyframes loading-pulse {
            0% { transform: scale(0.6) rotate(-10deg); opacity: 0.4; filter: hue-rotate(0deg); }
            100% { transform: scale(1.4) rotate(10deg); opacity: 1; filter: hue-rotate(180deg); }
        }
        
        .result-fade-in { animation: result-fade-in 2s ease-out; }
        
        @keyframes result-fade-in {
            0% { opacity: 0; transform: translateY(50px) scale(0.6) rotateX(90deg); }
            30% { opacity: 0.3; transform: translateY(20px) scale(0.8) rotateX(45deg); }
            60% { opacity: 0.8; transform: translateY(-5px) scale(1.05) rotateX(-5deg); }
            100% { opacity: 1; transform: translateY(0) scale(1) rotateX(0deg); }
        }
        
        .percentage-counter {
            animation: count-up 3s ease-out;
            text-shadow: 0 0 30px rgba(236, 72, 153, 0.5);
        }
        
        @keyframes count-up {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            30% { transform: scale(0.5) rotate(-90deg); opacity: 0.3; }
            60% { transform: scale(1.3) rotate(0deg); opacity: 0.8; }
            80% { transform: scale(0.9) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .stars-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }
        
        .star {
            position: absolute; border-radius: 50%;
            animation: twinkle 4s linear infinite;
        }
        
        .star-small { width: 2px; height: 2px; background: rgba(255, 255, 255, 0.8); }
        .star-medium { width: 4px; height: 4px; background: linear-gradient(45deg, #fbbf24, #f59e0b); box-shadow: 0 0 10px #fbbf24; }
        .star-large { width: 6px; height: 6px; background: linear-gradient(45deg, #ec4899, #be185d); box-shadow: 0 0 15px #ec4899; }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            25% { opacity: 1; transform: scale(1.2); }
            50% { opacity: 0.6; transform: scale(1); }
            75% { opacity: 1; transform: scale(1.1); }
        }
        
        .btn-hover-effect {
            position: relative; overflow: hidden;
        }
        
        .btn-hover-effect::before {
            content: ''; position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn-hover-effect:hover::before { left: 100%; }
        
        .visit-counter { animation: visit-glow 2s ease-in-out infinite; }
        
        @keyframes visit-glow {
            0%, 100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.3); }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.6), 0 0 30px rgba(34, 197, 94, 0.3); }
        }
        
        .premium-border {
            background: linear-gradient(45deg, #f093fb, #f5576c, #4facfe, #00f2fe);
            background-size: 400% 400%;
            animation: premium-border 3s ease infinite;
            padding: 2px; border-radius: 1rem;
        }
        
        @keyframes premium-border {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .love-wave { animation: love-wave 3s ease-in-out infinite; }
        
        @keyframes love-wave {
            0%, 100% { transform: translateX(0px) rotate(0deg); }
            25% { transform: translateX(5px) rotate(1deg); }
            50% { transform: translateX(-5px) rotate(-1deg); }
            75% { transform: translateX(3px) rotate(0.5deg); }
        }
        
        .sparkle {
            position: absolute; width: 6px; height: 6px;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            border-radius: 50%; animation: sparkle 3s linear infinite;
            box-shadow: 0 0 10px #fbbf24;
        }
        
        @keyframes sparkle {
            0% { opacity: 0; transform: scale(0) rotate(0deg); }
            25% { opacity: 1; transform: scale(1) rotate(90deg); }
            50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
            75% { opacity: 0.7; transform: scale(0.8) rotate(270deg); }
            100% { opacity: 0; transform: scale(0) rotate(360deg); }
        }
        
        /* Install prompt styles */
        .install-prompt {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="premium-gradient min-h-screen font-poppins overflow-x-hidden">
    <!-- Background Stars -->
    <div class="stars-bg" id="stars-container"></div>
    
    <!-- Visit Counter -->
    <div class="fixed top-4 right-4 z-20 visit-counter bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-lg px-4 py-2">
        <div class="flex items-center space-x-2 text-green-100">
            <span class="text-xl">üëÅÔ∏è</span>
            <div class="text-sm font-medium">
                <div>Visites: <span id="visit-count" class="font-bold text-green-300">6877</span></div>
            </div>
        </div>
    </div>
    
    <!-- PWA Install Prompt -->
    <div id="install-prompt" class="fixed bottom-4 left-4 right-4 z-30 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-4 shadow-2xl install-prompt hidden">
        <div class="flex items-center justify-between text-white">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">üì±</span>
                <div>
                    <p class="font-bold">Installer l'application</p>
                    <p class="text-xs opacity-90">Acc√®s rapide depuis votre √©cran d'accueil</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button id="install-btn" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                    Installer
                </button>
                <button id="dismiss-install" class="text-white/70 hover:text-white text-xl">√ó</button>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
        <div class="premium-border">
            <div class="glass-premium rounded-2xl p-8 max-w-lg w-full">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="mb-4">
                        <h1 class="font-dancing text-5xl md:text-6xl text-white mb-2 love-wave">
                            üíñ Calculateur d'Amour Premium üíñ
                        </h1>
                        <div class="w-32 h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 mx-auto rounded-full"></div>
                    </div>
                    <p class="text-pink-100 text-base font-medium">D√©couvrez votre compatibilit√© amoureuse avec pr√©cision</p>
                    <div class="flex justify-center mt-6 space-x-3">
                        <div class="heart-float text-3xl">üíñ</div>
                        <div class="heart-float text-3xl">üíù</div>
                        <div class="heart-float text-3xl">üíó</div>
                        <div class="heart-float text-3xl">üíì</div>
                        <div class="heart-float text-3xl">üíï</div>
                        <div class="heart-float text-3xl">‚ù§Ô∏è</div>
                    </div>
                </div>
                
                <!-- Form -->
                <form id="love-form" class="space-y-6">
                    <div>
                        <label class="block text-white text-sm font-semibold mb-3">‚ú® Votre pr√©nom</label>
                        <input 
                            type="text" 
                            id="name1" 
                            required
                            class="w-full px-6 py-4 rounded-2xl bg-white/10 border-2 border-white/20 text-white placeholder-pink-200 focus:outline-none focus:ring-4 focus:ring-pink-400/50 focus:border-pink-300 transition-all duration-500 backdrop-blur-sm text-lg"
                            placeholder="Entrez votre pr√©nom..."
                        >
                    </div>
                    
                    <div class="text-center">
                        <span class="text-4xl pulse-heart">üíï</span>
                    </div>
                    
                    <div>
                        <label class="block text-white text-sm font-semibold mb-3">‚ú® Pr√©nom de votre partenaire</label>
                        <input 
                            type="text" 
                            id="name2" 
                            required
                            class="w-full px-6 py-4 rounded-2xl bg-white/10 border-2 border-white/20 text-white placeholder-pink-200 focus:outline-none focus:ring-4 focus:ring-pink-400/50 focus:border-pink-300 transition-all duration-500 backdrop-blur-sm text-lg"
                            placeholder="Entrez le pr√©nom de votre partenaire..."
                        >
                    </div>
                    
                    <button 
                        type="submit" 
                        class="w-full btn-hover-effect bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 hover:from-pink-600 hover:via-purple-600 hover:to-indigo-600 text-white font-bold py-5 px-8 rounded-2xl transform transition-all duration-500 hover:scale-105 shadow-2xl text-lg"
                    >
                        ‚ú®üíï R√©v√©ler Notre Amour üíï‚ú®
                    </button>
                </form>
                
                <!-- Loading Animation -->
                <div id="loading" class="hidden text-center py-8">
                    <div class="mb-6">
                        <h3 class="font-playfair text-2xl text-white font-semibold mb-4">Analyse en cours...</h3>
                        <div class="flex justify-center space-x-3 mb-6">
                            <div class="loading-heart text-5xl">‚ù§Ô∏è</div>
                            <div class="loading-heart text-5xl" style="animation-delay: 0.2s;">üíñ</div>
                            <div class="loading-heart text-5xl" style="animation-delay: 0.4s;">üíï</div>
                            <div class="loading-heart text-5xl" style="animation-delay: 0.6s;">üíó</div>
                            <div class="loading-heart text-5xl" style="animation-delay: 0.8s;">üíì</div>
                        </div>
                        <div class="space-y-2 text-pink-100 text-sm">
                            <div id="loading-text">Analyse des vibrations √©nerg√©tiques...</div>
                        </div>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-3 overflow-hidden shadow-inner">
                        <div id="progress-bar" class="bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 h-3 rounded-full transition-all duration-300 shadow-lg"></div>
                    </div>
                    <div class="text-right mt-2 text-pink-200 text-xs font-medium">
                        <span id="progress-text">0%</span>
                    </div>
                </div>
                
                <!-- Result -->
                <div id="result" class="hidden text-center py-6">
                    <div class="result-fade-in">
                        <div class="relative mb-8">
                            <div class="text-8xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 percentage-counter font-playfair" id="percentage">0%</div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div id="floating-hearts" class="absolute"></div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-white/20 to-white/10 rounded-3xl p-8 mb-8 border border-white/30 shadow-xl">
                            <div class="flex justify-center mb-4">
                                <span class="text-4xl" id="compatibility-emoji">üíñ</span>
                            </div>
                            <h3 class="text-white text-2xl font-bold mb-4 font-playfair" id="couple-names"></h3>
                            <div class="w-24 h-1 bg-gradient-to-r from-pink-400 to-purple-400 mx-auto rounded-full mb-4"></div>
                            <p class="text-pink-100 text-base leading-relaxed font-medium" id="love-advice"></p>
                        </div>
                        
                        <div class="space-y-4">
                            <button 
                                id="download-btn"
                                class="w-full btn-hover-effect bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 hover:from-emerald-600 hover:via-teal-600 hover:to-cyan-600 text-white font-bold py-4 px-8 rounded-2xl transform transition-all duration-500 hover:scale-105 shadow-2xl"
                            >
                                üì∏‚ú® T√©l√©charger Certificat d'Amour ‚ú®üì∏
                            </button>
                            
                            <button 
                                id="restart-btn"
                                class="w-full bg-white/15 hover:bg-white/25 text-white font-semibold py-4 px-8 rounded-2xl transform transition-all duration-500 hover:scale-105 border-2 border-white/30 hover:border-white/50"
                            >
                                üîÑ Nouvelle Analyse d'Amour
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Premium Footer -->
                <div class="text-center mt-8 p-4 bg-black/20 rounded-2xl border border-white/20">
                    <div class="text-pink-200 text-sm font-semibold">
                        <p class="font-playfair text-lg text-white mb-1">üíé REEL SERGE ALAIN üíé</p>
                        <p class="text-pink-300 font-medium">Expert en Relations & Amour</p>
                        <p class="text-pink-400 font-bold">üìû +225 07 1111 3420</p>
                        <div class="mt-2 text-xs text-pink-300">
                            <p>‚≠ê Service Premium de Compatibilit√© Amoureuse ‚≠ê</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Canvas for premium image generation -->
    <canvas id="result-canvas" class="hidden" width="1200" height="900"></canvas>
    
    <script>
        // Variables globales
        let currentPercentage = 0;
        let currentNames = { name1: '', name2: '' };
        let visitCount = 0;
        let deferredPrompt;
        
        // Gestion PWA et installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallPrompt();
        });
        
        function showInstallPrompt() {
            document.getElementById('install-prompt').classList.remove('hidden');
        }
        
        document.getElementById('install-btn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('App install√©e');
                }
                deferredPrompt = null;
            }
            document.getElementById('install-prompt').classList.add('hidden');
        });
        
        document.getElementById('dismiss-install').addEventListener('click', () => {
            document.getElementById('install-prompt').classList.add('hidden');
        });
        
        // Gestion des visites avec stockage temporaire en m√©moire
        let baseVisitCount = 6877;
        let sessionVisits = 0;
        
        function initVisitCounter() {
            // Simuler une persistance avec une variable globale pour cette session
            if (window.visitData) {
                visitCount = window.visitData;
            } else {
                visitCount = baseVisitCount;
                window.visitData = visitCount;
            }
            
            // Incr√©menter pour cette visite
            visitCount += 1;
            sessionVisits += 1;
            window.visitData = visitCount;
            
            // Animation du compteur
            let currentDisplay = visitCount - 50;
            const targetCount = visitCount;
            const increment = 50 / 30;
            
            const counterInterval = setInterval(() => {
                currentDisplay += increment;
                if (currentDisplay >= targetCount) {
                    currentDisplay = targetCount;
                    clearInterval(counterInterval);
                }
                document.getElementById('visit-count').textContent = Math.floor(currentDisplay).toLocaleString();
            }, 50);
        }
        
        // Incr√©menter les visites √† chaque calcul
        function incrementVisitCount() {
            visitCount += Math.floor(Math.random() * 3) + 1; // 1-3 visites simul√©es
            window.visitData = visitCount;
            document.getElementById('visit-count').textContent = visitCount.toLocaleString();
        }
        
        // Cr√©er les √©toiles de fond
        function createStars() {
            const container = document.getElementById('stars-container');
            const starTypes = [
                { class: 'star-small', count: 80 },
                { class: 'star-medium', count: 30 },
                { class: 'star-large', count: 15 }
            ];
            
            starTypes.forEach(type => {
                for (let i = 0; i < type.count; i++) {
                    const star = document.createElement('div');
                    star.className = `star ${type.class}`;
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 4 + 's';
                    star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    container.appendChild(star);
                }
            });
        }
        
        // Hash coh√©rent
        function hashString(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash);
        }
        
        // Calculer le pourcentage d'amour
        function calculateLovePercentage(name1, name2) {
            const n1 = name1.toLowerCase().trim();
            const n2 = name2.toLowerCase().trim();
            if (n1 === n2) return 100;
            const combination = [n1, n2].sort().join('');
            const hash = hashString(combination);
            return (hash % 75) + 25;
        }
        
        // Conseils d'amour
        function getLoveAdvice(percentage) {
            const adviceRanges = [
                { min: 95, max: 100, emoji: "üëë", advice: "üî• AMOUR L√âGENDAIRE ! Votre connexion transcende l'ordinaire. Vous √™tes des √¢mes s≈ìurs destin√©es l'une √† l'autre. Cultivez cette magie rare et pr√©cieuse." },
                { min: 85, max: 94, emoji: "‚ú®", advice: "üí´ HARMONIE PARFAITE ! Votre amour rayonne d'une √©nergie exceptionnelle. Continuez √† vous soutenir mutuellement et √† grandir ensemble." },
                { min: 75, max: 84, emoji: "üåü", advice: "üå∫ BELLE COMPLICIT√â ! Votre relation a des fondations solides. Explorez de nouvelles aventures ensemble pour enrichir votre lien." },
                { min: 65, max: 74, emoji: "üíù", advice: "üå∏ POTENTIEL MAGNIFIQUE ! Votre amour grandit naturellement. Prenez le temps de vous √©couter et de partager vos r√™ves." },
                { min: 55, max: 64, emoji: "üå∑", advice: "üåø CONNEXION PROMETTEUSE ! Chaque jour est une opportunit√© d'approfondir votre relation. La patience et la tendresse sont vos alli√©es." },
                { min: 25, max: 54, emoji: "üåπ", advice: "ü¶ã AMOUR EN D√âVELOPPEMENT ! Les plus belles histoires commencent parfois doucement. Focalisez-vous sur vos affinit√©s et laissez l'amour s'√©panouir." }
            ];
            
            const range = adviceRanges.find(r => percentage >= r.min && percentage <= r.max);
            return range || { emoji: "üíñ", advice: "L'amour est un myst√®re merveilleux qui s'√©crit jour apr√®s jour ! ‚ú®" };
        }
        
        // Textes de chargement
        const loadingTexts = [
            "Analyse des vibrations √©nerg√©tiques...",
            "Calcul des affinit√©s cosmiques...",
            "Mesure de la synchronicit√© amoureuse...",
            "√âvaluation de la compatibilit√© spirituelle...",
            "G√©n√©ration du certificat d'amour..."
        ];
        
        // Animation de progression
        function animateProgress() {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const loadingTextElement = document.getElementById('loading-text');
            let progress = 0;
            let textIndex = 0;
            
            const interval = setInterval(() => {
                progress += 2;
                progressBar.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                if (progress % 20 === 0 && textIndex < loadingTexts.length - 1) {
                    textIndex++;
                    loadingTextElement.textContent = loadingTexts[textIndex];
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 80);
        }
        
        // Animation du pourcentage
        function animatePercentage(targetPercentage) {
            const element = document.getElementById('percentage');
            let current = 0;
            const increment = targetPercentage / 60;
            
            const interval = setInterval(() => {
                current += increment;
                if (current >= targetPercentage) {
                    current = targetPercentage;
                    clearInterval(interval);
                }
                element.textContent = Math.round(current) + '%';
                
                if (Math.random() > 0.6) {
                    createFloatingHeart();
                    createSparkle();
                }
            }, 50);
        }
        
        // Cr√©er des c≈ìurs flottants
        function createFloatingHeart() {
            const container = document.getElementById('floating-hearts');
            const heart = document.createElement('div');
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíì', '‚ù§Ô∏è', 'üíù', 'üíò'];
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            heart.className = 'absolute text-3xl pointer-events-none';
            
            const angle = Math.random() * 2 * Math.PI;
            const radius = 150 + Math.random() * 100;
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;
            
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            heart.style.opacity = '0';
            heart.style.transform = 'scale(0) rotate(' + (Math.random() * 360) + 'deg)';
            heart.style.animation = 'float 3s ease-out forwards';
            
            container.appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 3000);
        }
        
        // Cr√©er des sparkles
        function createSparkle() {
            const container = document.getElementById('floating-hearts');
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            
            const angle = Math.random() * 2 * Math.PI;
            const radius = 100 + Math.random() * 150;
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;
            
            sparkle.style.left = x + 'px';
            sparkle.style.top = y + 'px';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            
            container.appendChild(sparkle);
            
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                }
            }, 3000);
        }
        
        // G√©n√©rer une image vraiment magnifique
        function generateBeautifulImage(name1, name2, percentage) {
            const canvas = document.getElementById('result-canvas');
            const ctx = canvas.getContext('2d');
            
            // Fond d√©grad√© √©l√©gant
            const gradient = ctx.createRadialGradient(600, 450, 100, 600, 450, 600);
            gradient.addColorStop(0, '#fdf2f8');
            gradient.addColorStop(0.3, '#fce7f3');
            gradient.addColorStop(0.6, '#fbcfe8');
            gradient.addColorStop(0.8, '#f9a8d4');
            gradient.addColorStop(1, '#ec4899');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1200, 900);
            
            // Motifs d√©coratifs subtils
            ctx.globalAlpha = 0.1;
            for (let i = 0; i < 30; i++) {
                ctx.beginPath();
                ctx.arc(Math.random() * 1200, Math.random() * 900, Math.random() * 80 + 20, 0, 2 * Math.PI);
                ctx.fillStyle = '#ffffff';
                ctx.fill();
            }
            ctx.globalAlpha = 1;
            
            // Cadre principal √©l√©gant
            ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
            ctx.shadowColor = 'rgba(0, 0, 0, 0.2)';
            ctx.shadowBlur = 20;
            ctx.shadowOffsetY = 10;
            ctx.beginPath();
            ctx.roundRect(100, 100, 1000, 700, 30);
            ctx.fill();
            ctx.shadowColor = 'transparent';
            
            // Bordure d√©corative
            ctx.strokeStyle = '#ec4899';
            ctx.lineWidth = 6;
            ctx.setLineDash([20, 10]);
            ctx.beginPath();
            ctx.roundRect(120, 120, 960, 660, 25);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // En-t√™te magnifique
            const headerGradient = ctx.createLinearGradient(200, 200, 1000, 200);
            headerGradient.addColorStop(0, '#ec4899');
            headerGradient.addColorStop(0.5, '#7c3aed');
            headerGradient.addColorStop(1, '#3b82f6');
            ctx.fillStyle = headerGradient;
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üíé CERTIFICAT DE COMPATIBILIT√â AMOUREUSE üíé', 600, 200);
            
            // Ligne d√©corative dor√©e
            const lineGradient = ctx.createLinearGradient(250, 220, 950, 220);
            lineGradient.addColorStop(0, 'transparent');
            lineGradient.addColorStop(0.2, '#fbbf24');
            lineGradient.addColorStop(0.5, '#f59e0b');
            lineGradient.addColorStop(0.8, '#fbbf24');
            lineGradient.addColorStop(1, 'transparent');
            ctx.strokeStyle = lineGradient;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(250, 220);
            ctx.lineTo(950, 220);
            ctx.stroke();
            
            // Noms des partenaires avec style
            ctx.fillStyle = '#1f2937';
            ctx.font = 'bold 36px Arial';
            ctx.fillText('Analyse de Compatibilit√© pour :', 600, 280);
            
            ctx.fillStyle = '#be185d';
            ctx.font = 'bold 42px Arial';
            ctx.fillText(`üíï ${name1} & ${name2} üíï`, 600, 330);
            
            // Cercle de pourcentage magnifique
            const centerX = 600;
            const centerY = 450;
            const radius = 120;
            
            // Fond du cercle
            ctx.fillStyle = '#f3f4f6';
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.fill();
            
            // Bordure du cercle
            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();
            
            // Arc de progression color√©
            const progressAngle = (percentage / 100) * 2 * Math.PI;
            const progressGradient = ctx.createConicGradient(0, centerX, centerY);
            
            if (percentage >= 80) {
                progressGradient.addColorStop(0, '#10b981');
                progressGradient.addColorStop(0.5, '#059669');
                progressGradient.addColorStop(1, '#047857');
            } else if (percentage >= 60) {
                progressGradient.addColorStop(0, '#f59e0b');
                progressGradient.addColorStop(0.5, '#d97706');
                progressGradient.addColorStop(1, '#b45309');
            } else {
                progressGradient.addColorStop(0, '#ef4444');
                progressGradient.addColorStop(0.5, '#dc2626');
                progressGradient.addColorStop(1, '#b91c1c');
            }
            
            ctx.strokeStyle = progressGradient;
            ctx.lineWidth = 15;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius - 10, -Math.PI/2, progressAngle - Math.PI/2);
            ctx.stroke();
            
            // Pourcentage au centre
            ctx.fillStyle = '#1f2937';
            ctx.font = 'bold 72px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${percentage}%`, centerX, centerY + 20);
            
            // Niveau de compatibilit√©
            let compatibilityText = "";
            let compatibilityColor = "";
            if (percentage >= 90) {
                compatibilityText = "√ÇMES S≈íURS";
                compatibilityColor = "#059669";
            } else if (percentage >= 80) {
                compatibilityText = "AMOUR PARFAIT";
                compatibilityColor = "#0d9488";
            } else if (percentage >= 70) {
                compatibilityText = "TR√àS COMPATIBLE";
                compatibilityColor = "#0891b2";
            } else if (percentage >= 60) {
                compatibilityText = "BONNE ENTENTE";
                compatibilityColor = "#d97706";
            } else {
                compatibilityText = "√Ä D√âVELOPPER";
                compatibilityColor = "#dc2626";
            }
            
            ctx.fillStyle = compatibilityColor;
            ctx.font = 'bold 28px Arial';
            ctx.fillText(compatibilityText, centerX, centerY + 70);
            
            // Section conseil avec design √©l√©gant
            ctx.fillStyle = 'rgba(236, 72, 153, 0.1)';
            ctx.beginPath();
            ctx.roundRect(150, 600, 900, 120, 15);
            ctx.fill();
            
            ctx.strokeStyle = '#ec4899';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.roundRect(150, 600, 900, 120, 15);
            ctx.stroke();
            
            // Titre du conseil
            ctx.fillStyle = '#7c3aed';
            ctx.font = 'bold 24px Arial';
            ctx.fillText('üí´ CONSEIL PERSONNALIS√â', 600, 630);
            
            // Texte du conseil
            const advice = getLoveAdvice(percentage);
            ctx.fillStyle = '#374151';
            ctx.font = '20px Arial';
            const maxWidth = 800;
            const lineHeight = 28;
            let y = 665;
            
            const words = advice.advice.split(' ');
            let line = '';
            
            for (let word of words) {
                const testLine = line + word + ' ';
                const metrics = ctx.measureText(testLine);
                if (metrics.width > maxWidth && line) {
                    ctx.fillText(line.trim(), 600, y);
                    line = word + ' ';
                    y += lineHeight;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line.trim(), 600, y);
            
            // Section branding professionnelle
            ctx.fillStyle = 'rgba(30, 41, 59, 0.95)';
            ctx.beginPath();
            ctx.roundRect(200, 750, 800, 100, 20);
            ctx.fill();
            
            // Logo et informations
            ctx.fillStyle = '#fbbf24';
            ctx.font = 'bold 32px Arial';
            ctx.fillText('üíé REEL SERGE ALAIN üíé', 600, 780);
            
            ctx.fillStyle = '#e2e8f0';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Expert Certifi√© en Relations & Compatibilit√© Amoureuse', 600, 805);
            
            ctx.fillStyle = '#22c55e';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('üìû +225 07 1111 3420 | Consultation Premium 24/7', 600, 830);
            
            // Date en bas
            ctx.fillStyle = '#6b7280';
            ctx.font = '16px Arial';
            ctx.textAlign = 'left';
            const today = new Date();
            const dateStr = today.toLocaleDateString('fr-FR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            ctx.fillText(`G√©n√©r√© le ${dateStr}`, 150, 880);
            
            // Num√©ro de certificat
            ctx.textAlign = 'right';
            const certNumber = 'LOVE-' + Date.now().toString(36).toUpperCase();
            ctx.fillText(`Certificat N¬∞ ${certNumber}`, 1050, 880);
            
            // C≈ìurs d√©coratifs √©l√©gants
            ctx.globalAlpha = 0.3;
            ctx.font = '40px Arial';
            const decorativeHearts = [
                {x: 200, y: 300, heart: 'üíñ'},
                {x: 1000, y: 300, heart: 'üíï'},
                {x: 180, y: 500, heart: 'üíó'},
                {x: 1020, y: 500, heart: 'üíì'},
                {x: 220, y: 700, heart: '‚ù§Ô∏è'},
                {x: 980, y: 700, heart: 'üíù'}
            ];
            
            decorativeHearts.forEach(item => {
                ctx.fillText(item.heart, item.x, item.y);
            });
            ctx.globalAlpha = 1;
            
            return canvas.toDataURL('image/png');
        }
        
        // Helper function pour les rectangles arrondis
        CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            this.beginPath();
            this.moveTo(x + r, y);
            this.arcTo(x + w, y, x + w, y + h, r);
            this.arcTo(x + w, y + h, x, y + h, r);
            this.arcTo(x, y + h, x, y, r);
            this.arcTo(x, y, x + w, y, r);
            this.closePath();
            return this;
        };
        
        // G√©rer la soumission du formulaire
        document.getElementById('love-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name1 = document.getElementById('name1').value.trim();
            const name2 = document.getElementById('name2').value.trim();
            
            if (!name1 || !name2) return;
            
            currentNames = { name1, name2 };
            
            // Incr√©menter les visites
            incrementVisitCount();
            
            // Transition fluide
            document.getElementById('love-form').style.opacity = '0';
            document.getElementById('love-form').style.transform = 'scale(0.9)';
            
            setTimeout(() => {
                document.getElementById('love-form').classList.add('hidden');
                document.getElementById('loading').classList.remove('hidden');
                
                document.getElementById('love-form').style.opacity = '1';
                document.getElementById('love-form').style.transform = 'scale(1)';
            }, 300);
            
            animateProgress();
            currentPercentage = calculateLovePercentage(name1, name2);
            
            await new Promise(resolve => setTimeout(resolve, 5000));
            
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('result').classList.remove('hidden');
            
            document.getElementById('couple-names').textContent = `${name1} & ${name2}`;
            const advice = getLoveAdvice(currentPercentage);
            document.getElementById('love-advice').textContent = advice.advice;
            document.getElementById('compatibility-emoji').textContent = advice.emoji;
            
            animatePercentage(currentPercentage);
            
            setTimeout(() => {
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => createSparkle(), i * 100);
                }
            }, 1000);
        });
        
        // T√©l√©charger l'image
        document.getElementById('download-btn').addEventListener('click', function() {
            this.innerHTML = '‚è≥ G√©n√©ration en cours...';
            this.disabled = true;
            
            setTimeout(() => {
                const imageData = generateBeautifulImage(currentNames.name1, currentNames.name2, currentPercentage);
                
                const link = document.createElement('a');
                const filename = `Certificat-Amour-${currentNames.name1}-${currentNames.name2}-${currentPercentage}%.png`;
                link.download = filename;
                link.href = imageData;
                link.click();
                
                this.innerHTML = '‚úÖ Certificat t√©l√©charg√© ! üì∏‚ú®';
                setTimeout(() => {
                    this.innerHTML = 'üì∏‚ú® T√©l√©charger Certificat d\'Amour ‚ú®üì∏';
                    this.disabled = false;
                }, 2000);
            }, 1500);
        });
        
        // Recommencer
        document.getElementById('restart-btn').addEventListener('click', function() {
            document.getElementById('result').style.opacity = '0';
            document.getElementById('result').style.transform = 'scale(0.9)';
            
            setTimeout(() => {
                document.getElementById('result').classList.add('hidden');
                document.getElementById('love-form').classList.remove('hidden');
                document.getElementById('name1').value = '';
                document.getElementById('name2').value = '';
                document.getElementById('percentage').textContent = '0%';
                document.getElementById('progress-bar').style.width = '0%';
                document.getElementById('progress-text').textContent = '0%';
                document.getElementById('loading-text').textContent = loadingTexts[0];
                
                document.getElementById('result').style.opacity = '1';
                document.getElementById('result').style.transform = 'scale(1)';
                
                document.getElementById('floating-hearts').innerHTML = '';
                document.getElementById('name1').focus();
            }, 300);
        });
        
        // Effets visuels sur les inputs
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.style.transform = 'scale(1.02)';
                this.style.boxShadow = '0 0 30px rgba(236, 72, 153, 0.3)';
            });
            
            input.addEventListener('blur', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = 'none';
            });
            
            input.addEventListener('input', function() {
                if (this.value.length > 0) {
                    this.style.borderColor = 'rgba(34, 197, 94, 0.5)';
                    this.style.background = 'rgba(34, 197, 94, 0.1)';
                } else {
                    this.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                    this.style.background = 'rgba(255, 255, 255, 0.1)';
                }
            });
        });
        
        // Effet parallax
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallax = document.querySelector('.stars-bg');
            const speed = scrolled * 0.5;
            parallax.style.transform = `translateY(${speed}px)`;
        });
        
        // Cr√©er des sparkles continus
        function createContinuousSparkles() {
            const container = document.getElementById('floating-hearts');
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = (Math.random() * 400 - 200) + 'px';
                    sparkle.style.top = (Math.random() * 400 - 200) + 'px';
                    sparkle.style.animationDelay = Math.random() * 3 + 's';
                    container.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 3000);
                }, i * 200);
            }
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initVisitCounter();
            createStars();
            
            // Afficher prompt d'installation apr√®s 3 secondes
            setTimeout(() => {
                if (!window.matchMedia('(display-mode: standalone)').matches) {
                    showInstallPrompt();
                }
            }, 3000);
            
            setTimeout(() => {
                document.querySelector('h1').style.animation = 'result-fade-in 2s ease-out';
            }, 500);
            
            setInterval(() => {
                if (!document.getElementById('result').classList.contains('hidden')) {
                    createContinuousSparkles();
                }
            }, 3000);
        });
        
        // Easter egg
        document.querySelector('h1').addEventListener('dblclick', function() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.innerHTML = 'üíñ';
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = '0px';
                    heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '1000';
                    heart.style.animation = 'fall 3s linear forwards';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.parentNode.removeChild(heart);
                        }
                    }, 3000);
                }, i * 100);
            }
        });
        
        // Animation de chute
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(${window.innerHeight + 100}px) rotate(360deg);
                    opacity: 0;
                }
            }
            .pulse-heart {
                animation: pulse-heart 2s ease-in-out infinite;
            }
            @keyframes pulse-heart {
                0%, 100% { transform: scale(1); opacity: 0.8; }
                50% { transform: scale(1.3); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        
        // Pr√©chargement des polices
        const fontPreloader = document.createElement('div');
        fontPreloader.style.fontFamily = 'Dancing Script, Poppins, Playfair Display';
        fontPreloader.style.position = 'absolute';
        fontPreloader.style.visibility = 'hidden';
        fontPreloader.textContent = 'Preload';
        document.body.appendChild(fontPreloader);
        setTimeout(() => document.body.removeChild(fontPreloader), 100);
        
        // Service Worker pour PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                const swCode = `
                    self.addEventListener('fetch', function(event) {
                        event.respondWith(
                            caches.match(event.request).then(function(response) {
                                return response || fetch(event.request);
                            })
                        );
                    });
                `;
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl).then(function(registration) {
                    console.log('SW registered');
                }).catch(function(registrationError) {
                    console.log('SW registration failed');
                });
            });
        }
    </script>
</body>
</html>
